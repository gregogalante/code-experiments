<html>
  <head>
    <meta charset="utf-8">
    <title>Gradients</title>
    <style>

      body { margin: 0; }

      #background {
        width: 100%;
        height: 100%;
        background: linear-gradient(0deg, #00b3e3, #253362);
      }

    </style>
  </head>
  <body>
    <div id="background"></div>
    <script>

      // Set used variables
      var backgroundElement = document.querySelector('#background')
      var colorOne = '#00b3e3'
      var colorTwo = '#253362'
      var mrefreshinterval = 20
      var lastmousex = -1
      var lastmousey = -1
      var mousetravel = 0
      var lastdeg = 0
      var lastmousetravel
      var lastmousetime

      // Clean mousetravel value every mrefreshinterval
      setInterval(function () { mousetravel = 0 }, mrefreshinterval)

      // Update the DOM fir every speed reached
      function manageMousetravel(mousetravel) {
        if (mousetravel > lastmousetravel) {
          lastdeg += 10
        } else {
          lastdeg -= 10
        }

        setGradientBg(backgroundElement, lastdeg, colorOne, colorTwo)
        lastmousetravel = mousetravel
      }

      // Update the bckgorund gradient of a DOM element
      function setGradientBg (el, deg, colorOne, colorTwo) {
        console.log(deg)
        el.style.background = 'linear-gradient(' + deg + 'deg, ' + colorOne + ', ' + colorTwo + ')'
      }

      // Do not trigger function too many times
      function debounce(func, wait, immediate) {
        var timeout
        return function() {
          var context = this, args = arguments
          var later = function() {
            timeout = null
            if (!immediate) func.apply(context, args)
          };
          var callNow = immediate && !timeout
          clearTimeout(timeout)
          timeout = setTimeout(later, wait)
          if (callNow) func.apply(context, args)
        }
      }

      // Add listener to update mouse travel and manage speed
      document.body.addEventListener("mousemove", function(e) {
          var mousex = e.pageX
          var mousey = e.pageY

          if (lastmousex > -1) {
            mousetravel += Math.max(Math.abs(mousex-lastmousex), Math.abs(mousey-lastmousey))
            debounce(function () { // FIX IT
              manageMousetravel(mousetravel)
            }, 200)
          }

          lastmousex = mousex
          lastmousey = mousey
      })
    </script>
  </body>
</html>